{% extends "layout.html.j2" %}
{% block content %}

<div class="d-flex bd-highlight">
  <div class="flex-grow-1 bd-highlight">
    <div class="display-3">Kommande h채ndelser</div>
  </div>
</div>
<div class="row p-3">
  <div class="col">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th scope="col" class="col-1">h채ndelse</th>
          <th>datum</th>
          <th scope="col" class="col-2">dagar</th>
          <th scope="col" class="col-1">anm채lda</th>
          <th scope="col">#</th>
        </tr>
      </thead>
      <tbody>
        {% for event, subscriber_count in events %}
        <tr>
          <td class="align-middle">{{ event.tag_category.name }}</td>
          <td class="align-middle">
            {% set dates = event.event_days|map(attribute='date')|list|sort %}
            {% if dates|length == 1 %}
              {{ format_date(dates[0], format='dd MMMM YYYY') }}
            {% else %}
              {{ format_date(dates[0], format='dd MMMM YYYY') }} - {{ format_date(dates[-1], format='dd MMMM YYYY') }}
            {% endif %}
            </td>
          <td class="align-middle">
            {% for event_date in dates %}
            <b>{{ format_datetime(event_date, format='EEEE') }}</b>
            {%endfor%}
          </td>
          <td class="align-middle">
            {{ subscriber_count }}
          </td>
          <td class="align-middle justify-content-end col-2">
            <a href="{{ url_for('events.register_event', event_id=event.id)}}" class="btn btn-outline-success">Anm채l
              dig</a>
          </td>
        </tr>
        {% endfor%}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}